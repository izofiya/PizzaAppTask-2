(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(3),c=a(5),s=a(4),i=a(6),l=a(1),o=a(0),u=a.n(o),p=a(9),d=a.n(p),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("button",{id:"load-btn",className:!1===this.props.className?"button":"button loading",onClick:this.props.onClick},"Load")}}]),t}(u.a.Component),m=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={},a.getStyles=a.getStyles.bind(Object(l.a)(Object(l.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"getStyles",value:function(e,t){var a=0;return t>4&&t<8?a=-30:t>6&&t<12?a=-45:t>10&&(a=-60),{transform:"rotate("+360/t*(e+1)+"deg) skewY("+a+"deg)"}}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{id:"app"},u.a.createElement("h5",null,"Pizza type: "+this.props.pizzaOrder.type),u.a.createElement("h5",null,"Pizza name: "+this.props.pizzaOrder.name),u.a.createElement("ul",{className:"circle"},this.props.data.map(function(t,a){return u.a.createElement("li",{key:a,style:e.getStyles(a,e.props.data.length),className:"liCircleClass"},u.a.createElement("div",{className:"text"},a+1))})),u.a.createElement("div",{className:"div1"},u.a.createElement("h3",null,"How many people came to the party: "+this.props.dataAll.length),u.a.createElement("div",null,this.props.dataAll.map(function(e,t){return u.a.createElement("p",{key:t},e.name)}))),u.a.createElement("div",{className:"div2"},u.a.createElement("h3",null,"How many people eat pizza: "+this.props.data.length),u.a.createElement("div",null,this.props.data.map(function(e,t){return u.a.createElement("p",{key:t},e.name)}))))}}]),t}(u.a.Component),g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"divForPizza"},!1===this.props.isActivePizzaAndTable?null:u.a.createElement(m,{data:this.props.data,dataAll:this.props.dataAll,pizzaOrder:this.props.pizzaOrder}))}}]),t}(u.a.Component),O=a(7),b=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={count:1,countPay:0,countMoneyToCollect:parseFloat(a.props.totalOrder)},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return this.props.isActivePizzaAndTable?u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Name"),u.a.createElement("th",null,"Share to pay"),u.a.createElement("th",null,"Pay"))),u.a.createElement("tfoot",null,u.a.createElement("tr",null,u.a.createElement("td",null,"Total order"),u.a.createElement("td",null,this.props.totalOrder),u.a.createElement("td",null)),u.a.createElement("tr",null,u.a.createElement("td",null,"Money to collect"),u.a.createElement("td",null,this.state.count===this.props.vegans.length+1?"0 BYN":Math.round(10*this.state.countMoneyToCollect)/10+" BYN"),u.a.createElement("td",null)),u.a.createElement("tr",null,u.a.createElement("td",null,"Money collected"),u.a.createElement("td",null,this.state.count-1===this.props.vegans.length?parseFloat(this.props.totalOrder)+" BYN":Math.round(10*this.state.countPay)/10+" BYN"),u.a.createElement("td",null))),u.a.createElement("tbody",null,this.props.vegans.map(function(t,a){return u.a.createElement("tr",{key:a},!0===t.isVegan?u.a.createElement("td",{className:"green"},t.name):u.a.createElement("td",null,t.name),u.a.createElement("td",null,e.state[a]?"0 BYN":e.props.priceForOnePerson),u.a.createElement("td",null,u.a.createElement("button",{className:"buttonPay",disabled:!!e.state[a],onClick:function(){var t;e.setState((t={count:e.state.count+1},Object(O.a)(t,a,!e.state[a]),Object(O.a)(t,"countPay",e.state.countPay+parseFloat(e.props.priceForOnePerson)),Object(O.a)(t,"countMoneyToCollect",parseFloat(e.props.totalOrder)-parseFloat(e.props.priceForOnePerson)*e.state.count),t))}},e.state[a]?"PAID":"PAY")))}))):null}}]),t}(u.a.Component);a(16),a(17);a.d(t,"PizzaApp",function(){return z});var z=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={data:[],dataAll:[],isActivePizzaAndTable:!1,isActiveButtonLoad:!1,isLoading:!1,vegans:"",pizzaType:"",countVegan:0,countMeat:0,pizzaOrder:"",currency:"",countVisitorsEat:0,priceForOnePerson:0,totalOrder:0},a.handleButtonLoadClick=a.handleButtonLoadClick.bind(Object(l.a)(Object(l.a)(a))),a.getVisitors=a.getVisitors.bind(Object(l.a)(Object(l.a)(a))),a.getVegans=a.getVegans.bind(Object(l.a)(Object(l.a)(a))),a.getPizzaType=a.getPizzaType.bind(Object(l.a)(Object(l.a)(a))),a.getPriceForOnePerson=a.getPriceForOnePerson.bind(Object(l.a)(Object(l.a)(a))),a.getTotalOrder=a.getTotalOrder.bind(Object(l.a)(Object(l.a)(a))),a.getCurrencyExchange=a.getCurrencyExchange.bind(Object(l.a)(Object(l.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"getVisitors",value:function(e){var t=[],a=[];e.forEach(function(e){t.push(e.name)});for(var n=0;n<t.length;n++){var r=t[n].split(" ");a.push(r[0]+"%20"+r[1])}return a.join()}},{key:"getVegans",value:function(e){var t=this;fetch("https://gp-js-test.herokuapp.com/pizza/world-diets-book/"+this.getVisitors(e)).then(function(e){return e.json()}).then(function(e){var a=[],n=0,r=0;e.diet.forEach(function(e){!0===e.isVegan&&(a.push("vegan"),n+=1),!1===e.isVegan&&(a.push("meat"),r+=1)}),t.setState({vegans:e.diet,pizzaType:a,countVegan:n,countMeat:r}),t.getPizzaType(r,n,r+n)})}},{key:"getPizzaType",value:function(e,t,a){var n=this,r="https://gp-js-test.herokuapp.com/pizza/order/";if(e>=t&&(r=r+"meat/"+a),e<t){var c=["vegan","cheese"];r=r+c[Math.floor(Math.random()*c.length)]+"/"+a}Promise.all([fetch(r),fetch("https://gp-js-test.herokuapp.com/pizza/currency")]).then(function(e){var t=e[0],a=e[1];Promise.all([t.json(),a.json()]).then(function(e){n.setState({pizzaOrder:e[0],currency:e[1]}),n.getPriceForOnePerson(e[0],e[1],n.state.countVisitorsEat),n.getTotalOrder(e[0],e[1],1)})})}},{key:"getCurrencyExchange",value:function(e,t,a){return e.price.match(/USD/g)?Math.round(parseFloat(e.price)/a*t.USD*10)/10+" BYN":(e.price.match(/EUR/g),Math.round(parseFloat(e.price)/a*t.USD*10)/10+" BYN")}},{key:"getTotalOrder",value:function(e,t,a){this.setState({totalOrder:this.getCurrencyExchange(e,t,a)})}},{key:"getPriceForOnePerson",value:function(e,t,a){this.setState({priceForOnePerson:this.getCurrencyExchange(e,t,a)})}},{key:"handleButtonLoadClick",value:function(){var e=this;fetch("https://gp-js-test.herokuapp.com/pizza/guests").then(function(e){return e.json()}).then(function(t){var a=[],n=0;t.party.forEach(function(e){!0===e.eatsPizza&&(a.push(e),n+=1)}),e.setState({data:a,dataAll:t.party,countVisitorsEat:n,isActiveButtonLoad:!0,isLoading:!0}),e.getVegans(a)}),setTimeout(function(){e.setState({isActiveButtonLoad:!1,isActivePizzaAndTable:!0,isLoading:!1})},3e3)}},{key:"render",value:function(){return u.a.createElement("div",{className:"wrapp"},u.a.createElement(h,{className:this.state.isActiveButtonLoad,onClick:this.handleButtonLoadClick}),this.state.isLoading?u.a.createElement("p",{className:"pLoading"},"loading"):u.a.createElement("div",null,u.a.createElement(b,{vegans:this.state.vegans,isActivePizzaAndTable:this.state.isActivePizzaAndTable,pizzaOrder:this.state.pizzaOrder,priceForOnePerson:this.state.priceForOnePerson,totalOrder:this.state.totalOrder}),u.a.createElement(g,{data:this.state.data,dataAll:this.state.dataAll,isActivePizzaAndTable:this.state.isActivePizzaAndTable,pizzaOrder:this.state.pizzaOrder})))}}]),t}(u.a.Component),v=document.getElementById("root");d.a.render(u.a.createElement(z,null),v)}},[[10,1,2]]]);
//# sourceMappingURL=main.63bd1fe0.chunk.js.map